#!/bin/sh

##########################################################################
#                                                                        #
#                 *************************************                  #
#                 * Copyright 2019 Federico Cosentino *                  #
#                 *************************************                  #
#                                                                        #
# This program is free software: you can redistribute it and/or modify   #
# it under the terms of the GNU General Public License as published by   #
# the Free Software Foundation, either version 3 of the License, or      #
# (at your option) any later version.                                    #
#                                                                        #
# This program is distributed in the hope that it will be useful,        #
# but WITHOUT ANY WARRANTY; without even the implied warranty of         #
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          #
# GNU General Public License for more details.                           #
#                                                                        #
# You should have received a copy of the GNU General Public License      #
# along with this program.  If not, see <https://www.gnu.org/licenses/>. #
#                                                                        #
##########################################################################

conf_files="\
	/etc/dnsmasq.conf \
	/etc/hostapd.conf \
	/etc/wpa_supplicant.conf \
	/etc/net_bridges.txt \
	/etc/wlan_virtdev.txt \
	/etc/network/interfaces \
	/etc/firewall.d/config \
	/etc/firewall.d/firewall_rules.txt \
	/etc/firewall.d/ports_forwarding.txt"

echo_bold() {
	echo -e "\033[1m$1\033[0m"
}

for file in $conf_files ; do
	echo_bold "Content of file \"$file\":"

	num_lines=0
	if [ -f "$file" ] ; then
		while IFS= read -r line ; do
			# Ignore comments and blank lines.
			case "$line" in
				""|"#"*) continue ;;
			esac

			echo "$line"
			num_lines=$((num_lines+1))

		done < "$file"
	fi

	[ $num_lines = 0 ] && echo "~~~ Missing or empty file ~~~"
done

exit 0
